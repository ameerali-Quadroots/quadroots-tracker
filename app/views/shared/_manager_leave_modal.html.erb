<div class="modal fade" id="managerLeaveModal" tabindex="-1" aria-labelledby="managerLeaveModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content dashboard-card">
      <%= form_with(model: Leave.new, url: leaves_path, local: true) do |f| %>
        <div class="modal-header">
          <h5 class="modal-title fw-bold">
            <i class="bi bi-person-plus me-2 text-info"></i>
            Request Leave for Executive
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>

        <div class="modal-body">
          <div class="mb-4">
            <%= f.label :user_id, "Select Executive", class: "form-label fw-semibold text-dark" %>
            <%= f.collection_select :user_id, 
                  User.where(role: "Executive", department: current_user.department),
                  :id, 
                  :name,
                  { prompt: "Choose Executive..." },
                  { class: "form-select", required: true } %>
            <div class="form-text">Only executives from your department are listed</div>
          </div>

          <div class="mb-4">
            <%= f.label :leave_type, "Leave Type", class: "form-label fw-semibold text-dark" %>
            <%= f.select :leave_type, 
                  options_for_select([
                    ["Medical Leave", "medical"], 
                    ["Casual Leave", "casual"],
                    ["Emergency Leave", "emergency"]
                  ]),
                  { include_blank: "Select Leave Type" },
                  class: "form-select", 
                  required: true %>
          </div>

          <div class="row mb-4">
            <div class="col-md-6">
              <%= f.label :start_date, "Start Date", class: "form-label fw-semibold text-dark" %>
              <%= f.date_field :start_date, 
                    class: "form-control", 
                    required: true,
                    min: Date.today %>
            </div>
            <div class="col-md-6">
              <%= f.label :end_date, "End Date", class: "form-label fw-semibold text-dark" %>
              <%= f.date_field :end_date, 
                    class: "form-control", 
                    required: true,
                    min: Date.today %>
            </div>
          </div>

          <div class="mb-3">
            <%= f.label :reason, "Reason for Leave", class: "form-label fw-semibold text-dark" %>
            <%= f.text_area :reason, 
                  rows: 4, 
                  class: "form-control", 
                  placeholder: "Enter reason for the executive's leave..." %>
            <%= f.hidden_field :approved_by_manager, value: "true" %>
            <div class="form-text">This leave will be automatically approved as it's requested by a manager</div>
          </div>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-outline-premium btn-premium" data-bs-dismiss="modal">
            <i class="bi bi-x-circle me-2"></i>Cancel
          </button>
          <%= f.submit "Submit Leave Request", class: "btn btn-info btn-premium" %>
        </div>
      <% end %>
    </div>
  </div>
</div>